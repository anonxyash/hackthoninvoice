<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Management - Vinay Mobile</title>
    <meta name="description" content="Stock management for Vinay Mobile Shop">
    <meta name="theme-color" content="#6a11cb">
    
    <!-- Fonts and styles -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    
    <style>
        /* Additional styles specific to product management */
        .stock-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .stock-header {
            margin-bottom: 30px;
        }
        
        .form-card,
        .stock-list-card {
            margin-bottom: 20px;
        }
        
        .product-form {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }
        
        .form-actions {
            grid-column: 1 / -1;
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .search-bar {
            margin-bottom: 20px;
        }
        
        .stock-table {
            width: 100%;
        }
        
        .stock-table th {
            text-align: left;
        }
        
        .stock-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            flex: 1;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            background: linear-gradient(45deg, rgba(106, 17, 203, 0.1), rgba(37, 117, 252, 0.1));
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: 600;
            margin: 5px 0;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        /* Confirmation dialog */
        .confirm-dialog {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .confirm-dialog-content {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            max-width: 400px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }
        
        .confirm-dialog-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
        
        .product-actions {
            display: flex;
            gap: 5px;
        }
        
        .btn-secondary {
            background: linear-gradient(45deg, #2575fc, #6a11cb);
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 1001;
            opacity: 0;
            transform: translateY(-20px);
            transition: opacity 0.3s, transform 0.3s;
        }
        
        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .notification.success {
            background: linear-gradient(45deg, #00b09b, #96c93d);
        }
        
        .notification.error {
            background: linear-gradient(45deg, #ff0844, #ffb199);
        }
        
        /* No products message */
        .no-products {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
        }
        
        /* GST Reports Styles */
        .gst-reports-card {
            margin-top: 20px;
        }
        
        .gst-report-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 15px 0;
            align-items: center;
        }
        
        .date-range-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .date-range-selector .input-group {
            margin-bottom: 0;
        }
        
        .date-range-selector label {
            margin-right: 5px;
        }
        
        .gst-report-stats {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #1e3c72, #2a5298);
        }
        
        #exportGstReportBtn {
            min-width: 250px;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="header">
            <div class="logo">Invoice Generator</div>
            <div class="header-buttons">
                <button id="backToBillingBtn" class="btn">Back to Billing</button>
            </div>
        </div>
        
        <div class="stock-container">
            <div class="stock-header">
                <h1>Stock Management</h1>
                <p>Add, update and manage your product inventory</p>
            </div>
            
            <div class="stock-stats">
                <div class="stat-card">
                    <span class="stat-label">Total Products</span>
                    <div class="stat-value" id="totalProductsCount">0</div>
                </div>
                <div class="stat-card">
                    <span class="stat-label">Low Stock Items</span>
                    <div class="stat-value" id="lowStockCount">0</div>
                </div>
                <div class="stat-card">
                    <span class="stat-label">Total Stock Value</span>
                    <div class="stat-value" id="totalStockValue">₹0</div>
                </div>
            </div>
            
            <div class="card glow form-card">
                <h2>Add/Edit Product</h2>
                <form id="productForm" class="product-form">
                    <input type="hidden" id="productId">
                    
                    <div class="input-group">
                        <label for="productName">Product Name</label>
                        <input type="text" id="productName" required placeholder="Enter product name">
                    </div>
                    
                    <div class="input-group">
                        <label for="productPrice">Price (₹)</label>
                        <input type="number" id="productPrice" required min="0" step="0.01" placeholder="Enter price">
                    </div>
                    
                    <div class="input-group">
                        <label for="productPieces">Stock Quantity</label>
                        <input type="number" id="productPieces" required min="0" placeholder="Enter stock quantity">
                    </div>
                    
                    <div class="input-group">
                        <label for="partyName">Party Name</label>
                        <input type="text" id="partyName" placeholder="Enter supplier/party name">
                    </div>
                    
                    <div class="input-group">
                        <label for="partyDetail">Party Detail</label>
                        <input type="text" id="partyDetail" placeholder="Enter supplier/party details">
                    </div>
                    
                    <div class="input-group">
                        <label for="productNote">Note (IMEI details, etc.)</label>
                        <input type="text" id="productNote" placeholder="Enter note, IMEI information, etc.">
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" id="saveProductBtn" class="btn btn-success">Add Product</button>
                        <button type="button" id="cancelEditBtn" class="btn btn-danger" style="display: none;">Cancel</button>
                    </div>
                </form>
            </div>
            
            <div class="card glow stock-list-card">
                <h2>Products List</h2>
                
                <div class="search-bar">
                    <div class="input-group">
                        <input type="text" id="searchStockProducts" placeholder="Search products...">
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="stock-table" id="stockTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Product Name</th>
                                <th>Price (₹)</th>
                                <th>Stock</th>
                                <th>Party Name</th>
                                <th>Party Detail</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="stockTableBody">
                            <!-- Products will be listed here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Data Backup Section -->
        <div class="card glow backup-card">
            <h2>Data Backup & Restore</h2>
            <p>Export your product database to keep a backup or transfer to another device.</p>
            
            <div class="backup-actions">
                <button id="exportDataBtn" class="btn btn-secondary">
                    <span class="icon">↓</span> Export as Spreadsheet (CSV)
                </button>
                <button id="importDataBtn" class="btn">
                    <span class="icon">↑</span> Import Products Data
                </button>
            </div>
            <div id="importArea" style="display: none;">
                <div class="input-group">
                    <label for="importFile">Select backup file to import:</label>
                    <input type="file" id="importFile" accept=".json">
                </div>
                <div class="import-warning">
                    <p><strong>Warning:</strong> Importing data will replace your current product database. Make sure to export your current data first if needed.</p>
                </div>
            </div>
        </div>
        
        <!-- GST Invoice Reports Section -->
        <div class="card glow gst-reports-card">
            <h2>GST Invoice Reports</h2>
            <p>Export GST invoice data for your CA or GST filing. Only GST invoices are included in this report.</p>
            
            <div class="gst-report-actions">
                <button id="exportGstReportBtn" class="btn btn-primary">
                    <span class="icon">↓</span> Download All GST Invoice Data (CSV)
                </button>
                <button id="refreshGstReportBtn" class="btn btn-secondary" style="margin-left: 10px;">
                    <span class="icon">↻</span> Refresh Report
                </button>
                <button id="resetGstReportBtn" class="btn btn-danger" style="margin-left: 10px;">
                    <span class="icon">⟲</span> Reset Monthly Data
                </button>
                <button id="debugGstBtn" class="btn" style="background-color: #555; margin-left: 10px; font-size: 12px;">
                    Check GST Data
                </button>
            </div>
            
            <div class="gst-report-stats">
                <div class="stat-card">
                    <span class="stat-label">Total GST Invoices</span>
                    <div class="stat-value" id="totalGstInvoicesCount">0</div>
                </div>
                <div class="stat-card">
                    <span class="stat-label">Total Invoice Amount</span>
                    <div class="stat-value" id="totalGstAmount">₹0</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Confirmation Dialog -->
    <div id="confirmDialog" class="confirm-dialog">
        <div class="confirm-dialog-content">
            <h3 id="confirmDialogTitle">Confirm Action</h3>
            <p id="confirmDialogMessage">Are you sure you want to proceed?</p>
            <div class="confirm-dialog-actions">
                <button id="confirmDialogCancel" class="btn">Cancel</button>
                <button id="confirmDialogConfirm" class="btn btn-danger">Confirm</button>
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div id="notification" class="notification"></div>
    
    <script src="product-manager.js"></script>
</body>
</html> 